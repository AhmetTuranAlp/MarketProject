
@{
    ViewData["Title"] = "ProductCreate";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model List<SelectListItem>

<div class="container">
    <div class="row">
        <div class="col-md-8">
            <div class="form-group">
                <label for="name">Ürün Adı</label>
                <input type="text" class="form-control" id="name" placeholder="Ürün Adı Giriniz." required>
            </div>
            <div class="form-group">
                <label for="category">Kategori</label>
                <select class="form-control" id="category" required>
                    @foreach (var item in Model)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }

                </select>
            </div>
            <div class="form-group">
                <label for="price">Ürün Fiyatı</label>
                <input type="number" class="form-control" id="price" placeholder="Ürün Fiyatı Giriniz." required>
            </div>
            <div class="form-group">
                <label for="stock">Stok</label>
                <input type="number" class="form-control" id="stock" placeholder="Stok Miktarı Giriniz." required>
            </div>
            <button type="button" onclick="CreateProduct(this)" class="btn btn-success">Ekle</button>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
<script>
    function CreateProduct(e) {
        var sonuc = confirm("Kayıt Eklensin mi?")
        if (sonuc) {
            var name = $("#name").val();
            var price = $("#price").val();
            var stock = $("#stock").val();
            var category = $("#category").val();

            if (stock > 0 && price > 0) {
                $.post("/Product/ProductCreate", { name: name, price: price, stock: stock, category: category }, function (res) {
                    if (res) {
                        window.location.href = "/Product/Index";
                    }
                    else {
                        alert("İlgili Alanlar Boş Geçilemez")
                    }
                });
            }
            else {
                alert("İlgili Alanlar Boş Geçilemez")
            }

        }
        else {
            ShowMessage("success", "Kayıt Ekleme", "Kayıt Ekleme İşlemi İptal Edildi.");
        }

    }
</script>

@{
    ViewData["Title"] = "ProductEdit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model MarketProject.Data.ViewModel.ProductEditVM
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="form-group">
                    <label for="formGroupExampleInput">Ürün Adı</label>
                    <input type="text" class="form-control" id="name" value="@Model.Product.Name" placeholder="Ürün Adı Giriniz.">
                </div>
                <div class="form-group">
                    <label for="formGroupExampleInput">Kategori</label>
                    <select class="form-control" id="category" value="@Model.Product.ProductType">
                        @foreach (var item in Model.CategoryList)
                        {
                            if (item.Value == Model.Product.ProductType)
                            {
                                <option selected="selected" value="@item.Value">@item.Text</option>
                            }
                            else
                            {
                                <option value="@item.Value">@item.Text</option>
                            }

                        }
                    </select>
                </div>
                <div class="form-group">
                    <label for="formGroupExampleInput">Ürün Fiyatı</label>
                    <input type="number" class="form-control" value="@Convert.ToInt32(Model.Product.Price)"  id="price" placeholder="Ürün Fiyatı Giriniz.">
                </div>
                <div class="form-group">
                    <label for="formGroupExampleInput">Stok</label>
                    <input type="number" class="form-control" value="@Model.Product.Stock"  id="stock" placeholder="Stok Miktarı Giriniz.">
                </div>
                <button type="button" onclick="UpdateProduct(this)" class="btn btn-success">Güncelle</button>
            </div>
        </div>
    </div>

<script>
    
    function UpdateProduct(e) {
      var sonuc = confirm("Kayıt Güncellesin mi?")
        if (sonuc) {
            var name = $("#name").val();
            var price = $("#price").val();
            var stock = $("#stock").val();
            var category = $("#category").val();

            $.post("/Product/UpdateProduct", {Id:'@Model.Product.Id', name: name, price: price, stock: stock, category: category }, function (res) {
                if (res) {
                    window.location.href = "/Product/Index";
                }
                else {
                    alert("Hata Oluştu")
                }
            });
        }
        else {
            ShowMessage("success", "Kayıt Güncelleme", "Kayıt Güncelleme İşlemi İptal Edildi.");
        }
    }
</script>
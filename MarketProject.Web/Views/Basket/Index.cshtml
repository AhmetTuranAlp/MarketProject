
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model List<MarketProject.Data.Model.Basket>

<style>
    .panel-table .panel-body {
        padding: 0;
    }

        .panel-table .panel-body .table-bordered {
            border-style: none;
            margin: 0;
        }

            .panel-table .panel-body .table-bordered > thead > tr > th:first-of-type {
                text-align: center;
                width: 100px;
            }

            .panel-table .panel-body .table-bordered > thead > tr > th:last-of-type,
            .panel-table .panel-body .table-bordered > tbody > tr > td:last-of-type {
                border-right: 0px;
            }

            .panel-table .panel-body .table-bordered > thead > tr > th:first-of-type,
            .panel-table .panel-body .table-bordered > tbody > tr > td:first-of-type {
                border-left: 0px;
            }

            .panel-table .panel-body .table-bordered > tbody > tr:first-of-type > td {
                border-bottom: 0px;
            }

            .panel-table .panel-body .table-bordered > thead > tr:first-of-type > th {
                border-top: 0px;
            }

    .panel-table .panel-footer .pagination {
        margin: 0;
    }

    /*
    used to vertically center elements, may need modification if you're not using default sizes.
    */
    .panel-table .panel-footer .col {
        line-height: 34px;
        height: 34px;
    }

    .panel-table .panel-heading .col h3 {
        line-height: 30px;
        height: 30px;
    }

    .panel-table .panel-body .table-bordered > tbody > tr > td {
        line-height: 34px;
    }
</style>

<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet' type='text/css'>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default panel-table">

                <div class="panel-body">
                    <table class="table table-striped table-bordered table-list">
                        <thead>
                            <tr>
                                <th class="hidden-xs">ID</th>
                                <th>Adı</th>
                                <th>Fiyat</th>
                                <th>Adet</th>
                                <th><em class="fa fa-cog"></em></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td class="hidden-xs">@item.Id</td>
                                    <td>@item.ProductName</td>
                                    <td>@item.Price TL</td>
                                    <td>@item.Quantity</td>
                                    <td align="center">
                                        <a onclick="BasketDelete('@item.Id')" class="btn btn-danger"><em class="fa fa-trash"></em></a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div style="text-align:center" class="panel-footer">
                    <button type="button" onclick="CompleteShopping('@Model[0].UserId')" class="btn btn-success">Alişverişi Tamamla</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    function BasketDelete(e) {
        var sonuc = confirm("Kayıt Silinsin mi?")
        if (sonuc) {
            var id = e;
            $.post("/Basket/BasketDelete", { id: id }, function (res) {
                if (res) {
                    window.location.href = "/Basket/Index";
                }
                else {
                    alert("Hata Oluştu")
                }
            });
        }
        else {
            ShowMessage("warning", "Kayıt Silme", "Kayıt Silme İşlemi İptal Edildi.");
        }
    }


    function CompleteShopping(e) {
        var sonuc = confirm("Alışveriş Tamamlansın mı?")
        if (sonuc) {
            var id = e;
            $.post("/Basket/CompleteShopping", { id: id }, function (res) {
                if (res) {
                    window.location.href = "/Sales/Index";
                }
                else {
                    alert("Hata Oluştu")
                }
            });
        }
        else {
            ShowMessage("warning", "Alışveriş", "Alışveriş İşlemi İptal Edildi.");
        }
    }
</script>